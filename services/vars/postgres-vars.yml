---
# Common vars
ubuntu:
  desc:
    - 98-description
  packages:
    - ufw
    - update-motd
    - ssh
  purge:
    - open-iscsi
    - lvm2
    - snapd
    - networkd-dispatcher
  ufw:
    - 22
    - 80
    - 443
  sysctl:
    - name: vm.swappiness
      value: 1
    - name: fs.file-max
      value: 10000000
    - name: fs.nr_open
      value: 10000000
    - name: net.core.somaxconn
      value: 100000
    - name: net.core.netdev_max_backlog
      value: 100000
    - name: net.ipv4.ip_local_port_range
      value: 1024 65535
    - name: net.ipv4.ip_nonlocal_bind
      value: 1
    - name: net.ipv4.tcp_fin_timeout
      value: 10
    - name: net.ipv4.tcp_keepalive_time
      value: 300
    - name: net.ipv4.tcp_syncookies
      value: 0
    - name: net.ipv4.tcp_max_orphans
      value: 262144
    - name: net.ipv4.tcp_max_syn_backlog
      value: 100000
    - name: net.ipv4.tcp_max_tw_buckets
      value: 262144
    - name: net.ipv4.tcp_reordering
      value: 3
    - name: net.ipv4.tcp_mem
      value: 786432 1697152 1945728
    - name: net.ipv4.tcp_rmem
      value: 4096 87380 16777216
    - name: net.ipv4.tcp_wmem
      value: 4096 16384 16777216
    - name: net.ipv4.tcp_syn_retries
      value: 5
    - name: net.netfilter.nf_conntrack_max
      value: 10485760
    - name: net.netfilter.nf_conntrack_tcp_timeout_fin_wait
      value: 30
    - name: net.netfilter.nf_conntrack_tcp_timeout_time_wait
      value: 15